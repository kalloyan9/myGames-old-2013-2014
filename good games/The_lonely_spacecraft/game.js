var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1E3/30)},b=document.getElementById("canvas-id");b.width=900;b.height=600;var c=b.getContext("2d"),e=[],aa=new Image;aa.src="background.png";var ba=!1,ca=new Image;ca.src="canshield.png";var da=new Image;da.src="cantshield.png";var f=!1,g=600,ea=new Image;ea.src="shieldsprite.png";var fa=new Image;fa.src="life.png";
var h=0,ga=0,k=[],l=[],ha=new Audio;ha.src="bang1.wav";var ia=new Audio;ia.src="bang1.wav";var ja=new Audio;ja.src="bang2.wav";var ka=new Audio;ka.src="bang3.wav";var m=40,n=250,la=new Image;la.src="TaShip.png";var p=1E3,ma=2,q=0,r=0,na,oa,s=!1,t,u,v=0,w,pa=new Image,qa=new Image;qa.src="explosion.png";var x=0;pa.src="explosion.png";w=0;var y,z=0,A=[],B=[],C=0,D=200,ra=[],sa=!1,E=[],F=[],G=0,H=0,ta=new Image;ta.src="enemy1.png";var I=[],J=[],K=[],L=0,M=0,ua=new Image;ua.src="enemy2.png";
var N=[],O=[],P=[],Q=0,R=0,va=new Image;va.src="enemy3.png";var S=[],T=[],U=[],wa=0,V=0,xa=new Image;xa.src="asteroid.png";var ya=[],W=[],X=[],Y=[],za=0,Z=0,Aa=100,Ba=new Image;Ba.src="asteroid2.png";var Aa=100,Ca=[],$=[],r=q=0,Da=new Image;Da.src="jivot.png";window.addEventListener("keydown",function(a){e[a.keyCode]=!0},!1);window.addEventListener("keyup",function(a){e[a.keyCode]=!1},!1);window.addEventListener("mousemove",function(a){oa=a.clientX-b.offsetLeft;na=a.clientY-b.offsetTop},!1);
window.addEventListener("mousedown",function(){},!1);window.addEventListener("mouseup",function(){oa>=b.width-100&&oa<=b.width&&na>=b.height-100&&na<=b.height&&(f=599<=g?!0:!1)},!1);
function Ea(){0>=p&&(ma--,p=1E3,ha.play());0>=p&&(sa=!0);if(sa)for(x=0;15>x;)x++,16<=x&&(x=0);else x=0;0>=ma&&(ba=!0);if(!ba){600>g&&!f&&(g+=.03,f=!1);g&&f&&g--;500>=g&&(f=!1);f&&g--;e[87]&&5<n&&(n-=4);e[83]&&n+80<b.height&&(n+=4);e[65]&&18<m&&(m-=4);e[68]&&m+125<b.width&&(m+=4);e[32]&&150<C&&0<D-z?(A[z]=m+120,B[z]=n+36,z++,y++,ra[y]=new Audio,ra[y].src="bullet1.wav",ra[y].play(),15<=y&&(y=0),C=0):170>C&&(C+=20);for(var a=0;a<z;a++)A[a]+=8;0==G%260&&(F[H]=Math.random()*b.height,100>=F[H]&&(F[H]=400),
F[H]>=b.height-100&&(F[H]=400),E[H]=b.width,I[H]=100,H++);G+=.5;for(a=0;a<H;a++)E[a]-=1.5,0>=I[a]&&(q+=40,r+=40,s=!0,v=1,t=E[a],u=F[a],delete E[a],delete F[a],delete I[a]),0>E[a]+80&&(70<q?(q-=70,r-=70):r=q=0,delete E[a],delete F[a],delete I[a]);for(a=0;a<H;a++)m+120>=E[a]&&m<=E[a]+100&&n+80>=F[a]&&n<=F[a]+60&&(s=!0,v=1,t=E[a],u=F[a],f||(p-=450),10<q&&(q-=10,r-=10),I[a]=0);0==L%240&&(K[M]=Math.random()*b.height-700,100>=K[M]&&(K[M]=400),K[M]>=b.height-100&&(K[M]=400),E[H]=b.width,J[M]=b.width,N[M]=
100,M++);L+=.5;for(a=0;a<M;a++)J[a]-=2,J[a]>m+120&&(n>K[a]&&700>J[a]&&(K[a]+=1.5),n<K[a]&&700>J[a]&&(K[a]-=1.5)),0>=N[a]&&(q+=60,r+=60,s=!0,v=2,t=J[a],u=K[a],delete J[a],delete K[a],delete N[a]),0>J[a]+80&&(90<q?(q-=90,r-=90):r=q=0,delete J[a],delete K[a],delete N[a]);for(a=0;a<M;a++)m+120>=J[a]&&m<=J[a]+100&&n+80>=K[a]&&n<=K[a]+60&&(s=!0,v=2,t=J[a],u=K[a],f||(p-=560),20<q&&(q-=20,r-=20),N[a]=0);0==Q%400&&(P[R]=Math.random()*b.height-200,100>=P[R]&&(P[R]=400),P[R]>=b.height-100&&(P[R]=400),O[R]=b.width,
S[R]=500,R++);Q+=.5;for(a=0;a<R;a++)O[a]-=.7,0>=S[a]&&(q+=120,r+=120,s=!0,v=3,t=O[a],u=P[a],delete O[a],delete P[a],delete S[a]),0>O[a]+80&&(70<q?(q-=140,r-=140):r=q=0,delete O[a],delete P[a],delete S[a]);for(a=0;a<R;a++)m+120>=O[a]&&m<=O[a]+119&&n+80>=P[a]&&n<=P[a]+79&&(70<q?(q-=70,r-=70):r=q=0,s=!0,v=3,t=O[a],u=P[a],f||(p=-1),S[a]=0);0==ga%5E3&&(l[h]=Math.random()*b.height,k[h]=b.width+10,h++);ga+=.5;for(a=0;a<h;a++)k[a]-=.5,m+120>=k[a]&&m<=k[a]+50&&n+80>=l[a]&&n<=l[a]+50&&(ma++,p=1E3,delete k[a],
delete l[a]);3>V&&(0==wa%100&&(U[V]=-80,T[V]=Math.random()*b.width,W[V]=200,ya[V]=T[V]>b.width/2?-2:2,V++),wa++);for(a=0;a<V;a++)if(U[a]+=2,T[a]+=ya[a],T[a]>b.width||0>T[a]+80||U[a]>b.height)T[a]=Math.random()*b.width,U[a]=-80,W[a]=200,ya[V]=T[V]>b.width/2?2:-2;3>Z&&(0==za%Aa&&(Y[Z]=b.height+80,X[Z]=Math.random()*b.width,$[Z]=200,Ca[Z]=X[Z]>b.width/2+100?-3:3,Z++),za++);for(a=0;a<Z;a++)if(Y[a]-=2,X[a]+=Ca[a],X[a]>b.width||0>X[a]+80||0>Y[a])X[a]=Math.random()*b.width,Y[a]=b.height,$[a]=200,Ca[Z]=X[Z]>
b.width/2+100?-3:3;for(a=0;a<V;a++)20>=W[a]&&(T[a]=Math.random()*b.width,U[a]=-80,W[a]=200,q+=5,r+=5);for(a=0;a<Z;a++)20>=$[a]&&(X[a]=Math.random()*b.width,Y[a]=-80,$[a]=200,q+=5,r+=5);for(a=0;a<z;a++)for(var d=0;d<H;d++)A[a]+7>=E[d]&&A[a]<=E[d]+100&&B[a]+7>=F[d]&&B[a]<=F[d]+60&&(I[d]-=14,delete A[a],delete B[a]);for(a=0;a<z;a++)for(d=0;d<M;d++)A[a]+7>=J[d]&&A[a]<=J[d]+100&&B[a]+7>=K[d]&&B[a]<=K[d]+60&&(N[d]-=10,delete A[a],delete B[a]);for(a=0;a<z;a++)for(d=0;d<R;d++)A[a]+7>=O[d]&&A[a]<=O[d]+120&&
B[a]+7>=P[d]&&B[a]<=P[d]+80&&(S[d]-=20,delete A[a],delete B[a]);for(a=0;a<z;a++)for(d=0;d<V;d++)A[a]+7>=T[d]&&A[a]<=T[d]+70&&B[a]+7>=U[d]&&B[a]<=U[d]+60&&(W[d]-=70,delete A[a],delete B[a]);for(a=0;a<z;a++)for(d=0;d<Z;d++)A[a]+7>=X[d]&&A[a]<=X[d]+70&&B[a]+7>=Y[d]&&B[a]<=Y[d]+60&&($[d]-=70,delete A[a],delete B[a]);1E3>p&&(p+=.3);1E3<G&&(G=0);1E3<L&&(L=0);1E3<Q&&(Q=0);for(a=0;a<V;a++)m+120>=T[a]&&m<=T[a]+70&&n+80>=U[a]&&n<=U[a]+60&&(f||(p-=400),W[a]=0);for(a=0;a<Z;a++)m+120>=X[a]&&m<=X[a]+70&&n+80>=
Y[a]&&n<=Y[a]+60&&(f||(p-=400),$[a]=0);q+=.009;r+=.009;500<=r&&(D+=100,r=0);s&&(w++,15<=w&&(w=0,v=s=!1))}setTimeout(Ea,15)}
function Fa(){c.clearRect(0,0,b.width,b.height);c.globalAlpha=1;c.drawImage(aa,0,0,b.width,b.height);if(ba)c.fillStyle="LawnGreen",c.font="40px Comic Sans MS",c.fillText("GAME OVER, press F5 to restart!",b.width/2-325,b.height/2);else{for(var a=0;a<h;a++)c.drawImage(fa,k[a],l[a],50,50);0>=D-z&&(c.font="40px Comic Sans MS",c.fillText("OUT OF BULLETS!!!",b.width/2-325,b.height/2));c.fillStyle="red";for(a=0;a<H;a++)0<E[a]+80&&I&&(c.drawImage(ta,E[a],F[a],100,60),c.fillRect(E[a]+105,F[a]-20,10,I[a]));
c.fillStyle="red";for(a=0;a<M;a++)0<J[a]+80&&N&&(c.drawImage(ua,J[a],K[a],100,60),c.fillStyle="red",c.fillRect(J[a]+105,K[a]-20,10,N[a]));c.fillStyle="red";for(a=0;a<R;a++)0<O[a]+80&&S&&(c.drawImage(va,O[a],P[a],120,80),c.fillRect(O[a]+127,P[a]-10,10,S[a]/5));c.fillStyle="red";for(a=0;a<z;a++)c.fillStyle="#ef0b3a",A[a]-10<b.width+10?(c.beginPath(),c.arc(A[a],B[a],5,0,2*Math.PI),c.closePath(),c.fill()):(delete A[a],delete B[a]);s&&(1==v&&(ia.play(),c.drawImage(pa,50*w,0,50,51,t,u,90,90)),2==v&&(ja.play(),
c.drawImage(pa,50*w,0,50,51,t,u,100,100)),3==v&&(ka.play(),c.drawImage(pa,50*w,0,50,51,t-7,u-10,120,120)));f&&c.drawImage(ea,m,n,120,80);c.drawImage(la,m,n,120,80);0>=p&&c.drawImage(qa,50*w,0,50,51,m,n,150,100);c.fillStyle="red";c.fillRect(m-12,n-10,10,p/10);for(a=0;a<V;a++)c.drawImage(xa,T[a],U[a],70,60);for(a=0;a<Z;a++)c.drawImage(Ba,X[a],Y[a],70,60);c.fillStyle="LawnGreen";c.font="20px Comic Sans MS";c.fillText("Bullets: "+(D-z),10,50);599<=g&&c.drawImage(ca,b.width-100,b.height-100,100,100);599>
g&&c.drawImage(da,b.width-100,b.height-100,100,100);c.fillText("Score: "+Math.floor(q),700,50);c.fillStyle="Red";c.font="Chiller";c.drawImage(Da,10,3,30,30);c.fillText("lifes: "+ma,50,30)}requestAnimationFrame(Fa)}Ea();Fa();