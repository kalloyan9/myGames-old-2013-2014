var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1E3/30)},b=document.getElementById("canvas-id");b.width=800;b.height=600;var c=b.getContext("2d"),d,f;f=d=0;var g=new Image;g.src="marked.png";var h=0,k=1E4,l=new Image;l.src="coin.png";
for(var m,n,p,q=100,r=1;50>r;r++)for(var s=0;100>s;s++)6!=field[r][s]&&1!=field[r][s]&&(field[r][s]=Math.floor(40*Math.random()),7<=field[r][s]&&(field[r][s]=0),2==field[r][s]&&(field[r][s]=0),3==field[r][s]&&(field[r][s]=0),4==field[r][s]&&(field[r-1][s]=44));var t=new Image;t.src="main.png";var u=new Image,w=new Image,x=new Image,y=new Image,z=new Image,A=new Image,B=new Image;u.src="street.png";w.src="tree.png";x.src="empty.png";y.src="daskalo.png";z.src="blok.png";A.src="ograda.png";B.src="voda.jpg";
var C=new Image;C.src="blok44.png";var D=100,E=prompt("Name: ","Your name...");alert("Welcome to Simcity 2000 (cover), "+E+"!\nHave fun!!!");window.addEventListener("keydown",function(){},!1);window.addEventListener("keyup",function(){},!1);window.addEventListener("mousemove",function(a){m=Math.floor(a.clientX);n=Math.floor(a.clientY)},!1);var F,G,H,I;
window.addEventListener("mousedown",function(){n<b.height-60&&100>q&&(G=Math.floor((n+f)/30),F=Math.floor((m+d)/30));if(4==q&&0<=k-290){field[G][F]=4;0!=field[G-1][F]&&(k-=50);if(2==field[G+1][F]||2==field[G][F-1]||2==field[G][F+1])k+=290;field[G-1][F]=4;k-=580}},!1);
window.addEventListener("mouseup",function(){n<b.height-60&&100>q&&4!=q&&(H=Math.floor((m+d)/30),I=Math.floor((n+f)/30));n>=b.height-50&&n<b.height-10&&3<m&&73>m&&(D=q=0!=q?0:100);n>=b.height-50&&n<b.height-10&&73<m&&143>m&&(D=q=1!=q?1:100);n>=b.height-50&&n<b.height-10&&143<m&&213>m&&(D=q=2!=q?2:100);n>=b.height-50&&n<b.height-10&&213<m&&283>m&&(D=q=3!=q?3:100);n>=b.height-50&&n<b.height-10&&283<m&&353>m&&(D=q=4!=q?4:100);n>=b.height-50&&n<b.height-10&&353<m&&423>m&&(D=q=5!=q?5:100);n>=b.height-
50&&n<b.height-10&&423<m&&493>m&&(D=q=6!=q?6:100);if(90>q){if(F>H){var a=F;F=H;H=a}G>I&&(a=G,G=I,I=a)}for(a=G;a<I+1;a++)for(var e=F;e<H+1;e++)if(4!=field[a][e]&&4!=q){var v=!1;field[a][e]?(0!=q&&(console.log("Not clean!!!"),console.log("Please 1st clean it!"),v=!1),0==q&&0<=k-100&&(k-=100,v=!0)):(1==q&&0<=k-20&&(k-=20,v=!0),2==q&&0<=k-150&&(k-=150,v=!0),3==q&&0<=k-230&&(k-=230,v=!0),5==q&&0<=k-170&&(k-=170,v=!0),6==q&&0<=k-30&&(k-=30,v=!0));v&&(44!=field[a][e]&&4!=field[a][e]?(0==q&&90<=D&&(F=101,
G=51,H=101,I=51),field[a][e]=q):(alert("You can't leave the pople in this building HOMELESSES"),k+=100))}},!1);function J(){m>=b.width-20&&2400>=d&&(d+=5);20>=m&&-200<d&&(d-=5);n>=b.height-20&&1120>=f&&(f+=5);20>=n&&-200<f&&(f-=5);h+=.2;4<=h&&(h=0);90<=q&&(H=G=F=151,I=51);setTimeout(J,10)}
function K(){c.clearRect(0,0,b.width,b.height);c.globalAlpha=1;for(var a=0;50>a;a++)for(var e=0;100>e;e++)0==field[a][e]&&c.drawImage(x,30*e-d,30*a-f,29,29),1==field[a][e]&&c.drawImage(w,30*e-d,30*a-f,29,29),2==field[a][e]&&c.drawImage(u,30*e-d,30*a-f,29,29),3==field[a][e]&&c.drawImage(y,30*e-d,30*a-f,29,29),4==field[a][e]&&c.drawImage(z,30*e-d,30*a-f,29,29),5==field[a][e]&&c.drawImage(A,30*e-d,30*a-f,29,29),6==field[a][e]&&c.drawImage(B,30*e-d,30*a-f,29,29),44==field[a][e]&&c.drawImage(C,30*e-d-
5,30*a-f,35,35);if(151>F&&51>G&&151>H&&51>I)for(a=G;a<I+1;a++)for(e=F;e<H+1;e++)c.drawImage(g,30*e-d,30*a-f,29,29);c.drawImage(t,0,0,b.width,b.height);c.drawImage(x,3,b.height-57,60,50);c.drawImage(w,73,b.height-57,60,50);c.drawImage(u,143,b.height-57,60,50);c.drawImage(y,213,b.height-57,60,50);c.drawImage(z,283,b.height-57,60,50);c.drawImage(A,353,b.height-57,60,50);c.drawImage(B,423,b.height-57,60,50);c.fillStyle="black";c.font="30px Comic Sans MS";0==q&&(p="empty");1==q&&(p="tree");2==q&&(p="street");
3==q&&(p="school");4==q&&(p="building");5==q&&(p="fence");6==q&&(p="water");100!=q?c.fillText("Selected: "+p,10,30):c.fillText("Selected: none",10,30);c.font="20px Comic Sans MS";c.fillText(E+"'s town",10,60);c.fillStyle="black";c.font="40px Comic Sans MS";c.fillText(Math.floor(k),b.width-170,40);c.drawImage(l,Math.floor(h)%16*30,0,30,30,b.width-50,5,50,50);c.beginPath();c.arc(m,n,10,0,2*Math.PI);c.closePath();c.stroke();requestAnimationFrame(K)}J();K();